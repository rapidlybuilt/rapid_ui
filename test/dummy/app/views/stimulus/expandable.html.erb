<% layout.head.title = ["Expandable", "Content"] %>
<% layout.subheader.breadcrumbs.build("Content") %>
<% layout.subheader.breadcrumbs.build("Expandable") %>

<section>
  <h1 class="typography-h1">Expandable</h1>
  <p class="typography-body">Interactive expandable content using Stimulus controller for show/hide functionality.</p>

  <div class="demo-section">
    <h2 class="typography-h2">Basic Toggle</h2>
    <p class="demo-description">Use the toggle action to show/hide content.</p>

    <%= demo_code skip_wrapper: true do %>
      <div class="demo-card" data-controller="expandable">
        <button class="btn btn-primary" data-action="click->expandable#toggle">
          Toggle Content
        </button>
        <div class="mt-4 p-4 hidden" data-expandable-target="content">
          <p class="typography-body">This content can be toggled on and off. Click the button above to hide me!</p>
        </div>
      </div>
    <% end %>
  </div>

  <div class="demo-section">
    <h2 class="typography-h2">Open and Close Actions</h2>
    <p class="demo-description">Use separate open and close actions for explicit control.</p>

    <%= demo_code skip_wrapper: true do %>
      <div class="demo-card" data-controller="expandable">
        <div class="flex gap-2">
          <button class="btn btn-primary" data-action="click->expandable#open">
            Open
          </button>
          <button class="btn btn-secondary" data-action="click->expandable#close">
            Close
          </button>
        </div>
        <div class="mt-4 p-4 hidden" data-expandable-target="content" data-expandable-hidden-class="hidden">
          <p class="typography-body">This content can be explicitly opened or closed with separate buttons.</p>
        </div>
      </div>
    <% end %>
  </div>

  <div class="demo-section">
    <h2 class="typography-h2">FAQ / Accordion Style</h2>
    <p class="demo-description">Perfect for FAQ sections and accordion-style interfaces.</p>

    <%= demo_code skip_wrapper: true do %>
      <div class="w-full space-y-2">
        <div class="border rounded" data-controller="expandable">
          <button class="w-full text-left p-4 hover:bg-gray-50 flex justify-between items-center cursor-pointer" data-action="click->expandable#toggle">
            <span class="font-medium">What is the Expandable controller?</span>
            <span class="expandable-icon transition-transform" data-expandable-target="content" data-expandable-hidden-class="rotate-180">
              <%= icon "chevron-down", size: 20 %>
            </span>
          </button>
          <div class="hidden p-4 border-t" data-expandable-target="content" data-expandable-hidden-class="hidden">
            <p class="typography-body">The Expandable controller is a Stimulus controller that provides simple show/hide functionality by toggling CSS classes on target elements.</p>
          </div>
        </div>

        <div class="border rounded" data-controller="expandable">
          <button class="w-full text-left p-4 hover:bg-gray-50 flex justify-between items-center cursor-pointer" data-action="click->expandable#toggle">
            <span class="font-medium">How do I use it?</span>
            <span class="expandable-icon transition-transform" data-expandable-target="content" data-expandable-hidden-class="rotate-180">
              <%= icon "chevron-down", size: 20 %>
            </span>
          </button>
          <div class="hidden p-4 border-t" data-expandable-target="content" data-expandable-hidden-class="hidden">
            <p class="typography-body">Add <code>data-controller="expandable"</code> to a parent element, <code>data-expandable-target="content"</code> to the element you want to show/hide, and <code>data-action="click->expandable#toggle"</code> to your button.</p>
          </div>
        </div>

        <div class="border rounded" data-controller="expandable">
          <button class="w-full text-left p-4 hover:bg-gray-50 flex justify-between items-center cursor-pointer" data-action="click->expandable#toggle">
            <span class="font-medium">Can I customize the expanded class?</span>
            <span class="expandable-icon transition-transform" data-expandable-target="content" data-expandable-hidden-class="rotate-180">
              <%= icon "chevron-down", size: 20 %>
            </span>
          </button>
          <div class="hidden p-4 border-t" data-expandable-target="content" data-expandable-hidden-class="hidden">
            <p class="typography-body">Yes! Use <code>data-expandable-hidden-class="your-class"</code> to specify which class should be toggled. The default is "expanded".</p>
          </div>
        </div>
      </div>
    <% end %>
  </div>

  <div class="demo-section">
    <h2 class="typography-h2">Card Expansion</h2>
    <p class="demo-description">Expandable cards for showing additional details on demand.</p>

    <%= demo_code skip_wrapper: true do %>
      <div class="demo-card" data-controller="expandable">
        <div class="flex justify-between items-start">
          <div>
            <h3 class="font-sans text-xl font-semibold leading-tight mb-2 text-light-primary">Project Status</h3>
            <p class="m-0 text-light-secondary text-sm">View detailed information</p>
          </div>
          <button class="btn btn-outline-primary btn-circular w-10 h-10" data-action="click->expandable#toggle">
            <span class="transition-transform" data-expandable-target="content" data-expandable-hidden-class="rotate-180">
              <%= icon "chevron-down", size: 20 %>
            </span>
          </button>
        </div>
        <div class="hidden mt-4 space-y-2" data-expandable-target="content" data-expandable-hidden-class="hidden">
          <div class="flex items-center gap-4">
            <span class="w-24 font-medium">Progress:</span>
            <span class="badge badge-success">75%</span>
          </div>
          <div class="flex items-center gap-4">
            <span class="w-24 font-medium">Team Members:</span>
            <span>5 active</span>
          </div>
          <div class="flex items-center gap-4">
            <span class="w-24 font-medium">Deadline:</span>
            <span>December 31, 2025</span>
          </div>
          <div class="flex items-center gap-4">
            <span class="w-24 font-medium">Budget:</span>
            <span>$50,000</span>
          </div>
        </div>
      </div>
    <% end %>
  </div>

  <div class="demo-section">
    <h2 class="typography-h2">Animated with Transitions</h2>
    <p class="demo-description">Combine with CSS transitions for smooth animations.</p>

    <%= demo_code skip_wrapper: true do %>
      <div class="demo-card" data-controller="expandable">
        <button class="btn btn-primary" data-action="click->expandable#toggle">
          Toggle with Animation
        </button>
        <div class="mt-4 p-4 transition-all duration-300 ease-in-out max-h-0 overflow-hidden opacity-0"
            data-expandable-target="content"
            data-expandable-hidden-class="max-h-96 opacity-100">
          <p class="typography-body">This content animates in with a smooth transition effect using Tailwind CSS transition utilities.</p>
        </div>
      </div>
    <% end %>
  </div>

  <div class="demo-section">
    <h2 class="typography-h2">Controller API</h2>
    <div class="demo-card">
      <h3 class="font-medium mb-3">Targets</h3>
      <ul class="typography space-y-2">
        <li><code>content</code> - The element to show/hide (optional, defaults to the controller element itself)</li>
      </ul>

      <h3 class="font-medium mb-3 mt-6">Classes</h3>
      <ul class="typography space-y-2">
        <li><code>hidden</code> - The CSS class to toggle (optional, defaults to "hidden")</li>
      </ul>

      <h3 class="font-medium mb-3 mt-6">Actions</h3>
      <ul class="typography space-y-2">
        <li><code>toggle()</code> - Toggles the expanded class on the content target</li>
        <li><code>open()</code> - Adds the expanded class to the content target</li>
        <li><code>close()</code> - Removes the expanded class from the content target</li>
      </ul>
    </div>
  </div>
</section>

