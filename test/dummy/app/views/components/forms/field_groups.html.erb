<% layout.head.title = ["Field Groups", "Forms"] %>
<% build_breadcrumb "Field Groups" %>

<%= build_table_of_contents_sidebar typography: true do |headers| %>
  <div class="demo-header">
    <%= headers.h1 "Field Groups" %>
    <p class="typography-body">Form field groups with automatic grid layout and Bootstrap-style styling.</p>
  </div>

  <div class="demo-section">
    <%= headers.h2 "Layout" %>
    <p class="demo-description">A complete form with various field types using the grid layout system.</p>
  </div>

  <div class="demo-section">
    <%= headers.h3 "Grid" %>
    <p class="demo-description">Form fields are laid out in a grid according to a <code class="typography-code">colspan</code> option.</p>
    <%= demo_code helper: :component_forms_groups_grid_field_groups do %>
      <%= form_field_groups "basic" do |f| %>
        <% f.with_group :email, colspan: 6 do |g| %>
          <%= g.email_field_tag %>
        <% end %>
        <% f.with_group :password, colspan: 6 do |g| %>
          <%= g.password_field_tag %>
        <% end %>
        <% f.with_group :address do |g| %>
          <%= g.text_field_tag placeholder: "1234 Main St" %>
        <% end %>
        <% f.with_group :address_2 do |g| %>
          <%= g.text_field_tag placeholder: "Apartment, studio, or floor" %>
        <% end %>
        <% f.with_group :city, colspan: 6 do |g| %>
          <%= g.text_field_tag "Atlanta" %>
        <% end %>
        <% f.with_group :state, colspan: 4 do |g| %>
          <% g.with_label("State/Province") %>
          <%= g.select_tag options_for_select([ "", "California", "Georgia" ], selected: "") %>
        <% end %>
        <% f.with_group :zip, colspan: 2 do |g| %>
          <%= g.text_field_tag %>
        <% end %>
        <% f.with_radio_button_group :account_type do |g| %>
          <% g.with_option "personal", true, "Personal Account" %>
          <% g.with_option "business", false, "Business Account" %>
          <% g.with_option "nonprofit", false, "Non-Profit Organization", disabled: true %>
        <% end %>
        <% f.with_group :subscribe_to_newsletter, check: true do |g| %>
          <% g.with_label("Subscribe to newsletter") %>
          <%= g.checkbox_tag %>
        <% end %>
        <% f.with_buttons do |g| %>
          <% g.with_submit_button "Register" %>
          <% g.with_cancel_link "/" %>
        <% end %>
      <% end %>
    <% end %>
  </div>

  <div class="demo-section">
    <%= headers.h3 "Horizontal" %>
    <p class="demo-description">Labels horizontally aligned with the form fields.</p>
    <%= demo_code helper: :component_forms_groups_horizontal_field_groups do %>
      <%= form_field_groups "horizontal_demo", horizontal: true do |f| %>
        <% f.with_group :email do |g| %>
          <%= g.text_field_tag %>
        <% end %>
        <% f.with_group :first_name, colspan: 4 do |g| %>
          <%= g.text_field_tag %>
        <% end %>
        <% f.with_group :last_name, colspan: 4 do |g| %>
          <%= g.text_field_tag %>
        <% end %>
        <% f.with_radio_button_group :user_type do |g| %>
          <% g.with_option "regular", true, "Regular User" %>
          <% g.with_option "admin", false, "Admin User" %>
          <% g.with_option "superadmin", false, "Super Admin User" %>
        <% end %>
        <% f.with_checkbox_group :confirmed do |g| %>
          <% g.with_label("Confirmed") %>
          <%= g.checkbox_tag %>
        <% end %>
        <% f.with_buttons do |g| %>
          <% g.with_submit_button "Update" %>
          <% g.with_cancel_link "Back", "/" %>
        <% end %>
      <% end %>
    <% end %>
  </div>

  <div class="demo-section">
    <%= headers.h2 "Decorators" %>
    <p class="demo-description">Field groups can be decorated with additional content.</p>
  </div>

  <div class="demo-section">
    <%= headers.h3 "Errors" %>
    <p class="demo-description">When an error message is provided, the label and field turn red (text-danger) and the error message displays below the field.</p>
    <%= demo_code helper: :component_forms_field_groups_errors do %>
      <%= form_field_groups "validation_demo" do |f| %>
        <% f.with_group :email, colspan: 6, error: "Email is required" do |g| %>
          <%= g.email_field_tag %>
        <% end %>
        <% f.with_group :password, colspan: 6, error: "Password must be at least 8 characters" do |g| %>
          <%= g.password_field_tag %>
        <% end %>
      <% end %>

      <%= form_field_groups "horizontal_validation_demo", horizontal: true, class: "mt-8" do |f| %>
        <% f.with_group :email, error: "Please enter a valid email address" do |g| %>
          <% g.with_error do %>
            Please enter a valid email address. <%= link_to "Learn more", "#", class: "underline" %>
          <% end %>
          <%= g.email_field_tag %>
        <% end %>
      <% end %>
    <% end %>
  </div>

  <div class="demo-section">
    <%= headers.h3 "Hints" %>
    <p class="demo-description">Hint messages provide additional guidance below the field. They appear below errors if both are present.</p>
    <%= demo_code helper: :component_forms_field_groups_hints do %>
      <%= form_field_groups "hint_demo" do |f| %>
        <% f.with_group :username, colspan: 6, hint: "Must be at least 3 characters" do |g| %>
          <%= g.text_field_tag %>
        <% end %>
        <% f.with_group :email, colspan: 6, hint: "We'll never share your email with anyone else" do |g| %>
          <%= g.email_field_tag %>
        <% end %>
        <% f.with_group :password, hint: "Use a mix of letters, numbers, and symbols", error: "Password is required" do |g| %>
          <%= g.password_field_tag %>
        <% end %>
      <% end %>

      <%= form_field_groups "horizontal_hint_demo", horizontal: true, class: "mt-8" do |f| %>
        <% f.with_group :bio do |g| %>
          <% g.with_hint do %>
            Tell us about yourself in <strong>200 characters</strong> or less
          <% end %>
          <%= g.textarea_tag %>
        <% end %>
      <% end %>
    <% end %>
  </div>
<% end %>

