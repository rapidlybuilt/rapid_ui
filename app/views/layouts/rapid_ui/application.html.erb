<!DOCTYPE html>
<html>
  <head>
    <title>RapidUI Layout</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>
    <%= stylesheet_link_tag "rapid_ui/application" %>

    <link rel="icon" type="image/png" sizes="32x32" href="<%= image_path "rapid_ui/favicon-32x32.png" %>">
    <link rel="icon" type="image/png" sizes="16x16" href="<%= image_path "rapid_ui/favicon-16x16.png" %>">
    <link rel="apple-touch-icon" href="<%= image_path "rapid_ui/apple-touch-icon.png" %>">

    <%= javascript_importmap_tags "application", importmap: RapidUI.importmap  %>
  </head>
  <body data-controller="sidebar" data-sidebar-closed-cookie-value="sidebar_closed">
    <header class="header">
      <div class="header-left">
        <div class="header-logo">Rapid</div>
        <div data-controller="dropdown" class="relative">
          <button data-action="click->dropdown#toggle" class="header-btn">
            <%= icon_tag "menu", size: 16 %>
          </button>
          <div data-dropdown-target="content" class="hidden header-dropdown">
            <a href="#" class="header-dropdown-item">Builds & Deploys</a>
            <a href="#" class="header-dropdown-item">Code Coverage</a>
            <a href="#" class="header-dropdown-item">Errors</a>
            <hr class="header-dropdown-divider">
            <a href="#" class="header-dropdown-item">Content Management</a>
            <a href="#" class="header-dropdown-item">Users</a>
          </div>
        </div>
        <%# TODO: remove hardcoded demo path %>
        <div class="header-search relative" data-controller="search" data-search-path-value="/layout_demo/search">
          <%= icon_tag "search", size: 16 %>
          <input
            type="text"
            placeholder="Search"
            data-search-target="input"
            data-action="input->search#onInput"
          />
          <%# TODO: "Alt" for non-Mac. Hide for Mobile. %>
          <span data-search-target="shortcutHint" class="search-shortcut-hint">[Option+S]</span>
          <button data-search-target="closeButton" data-action="click->search#closeDropdown" class="search-close-btn hidden" title="Close search results">
            <%= icon_tag "x", size: 16 %>
          </button>

          <div data-search-target="dropdown" class="search-dropdown hidden">
            <!-- Loading state -->
            <div data-search-target="loading" class="search-loading hidden">
              <div class="search-spinner"></div>
              <span>Searching...</span>
            </div>

            <!-- Error state -->
            <div data-search-target="error" class="search-error hidden">
              <span>Error occurred while searching</span>
            </div>

            <!-- No results state -->
            <div data-search-target="noResults" class="search-no-results hidden">
              <span>No results found</span>
            </div>

            <!-- Results container -->
            <div data-search-target="results"></div>
          </div>
        </div>
      </div>
      <div class="header-right">
        <span>username</span>
        <span class="header-btn"><%= icon_tag "hash", size: 16 %></span>
        <span class="header-btn"><%= icon_tag "info", size: 16 %></span>
        <span class="header-btn"><%= icon_tag "circle-question-mark", size: 16 %></span>
        <span class="header-btn"><%= icon_tag "settings", size: 16 %></span>
        <select class="header-btn">
          <option>Select Option</option>
          <option>Another Option</option>
        </select>
        <div data-controller="dropdown" class="relative">
          <button data-action="click->dropdown#toggle" class="header-btn cursor-pointer">
            username <%= icon_tag "chevron-down", size: 16 %>
          </button>
          <div data-dropdown-target="content" class="hidden header-dropdown header-dropdown-right">
            <a href="#" class="header-dropdown-item">Profile Settings</a>
            <a href="#" class="header-dropdown-item">Account Preferences</a>
            <a href="#" class="header-dropdown-item">Billing & Plans</a>
            <hr class="header-dropdown-divider">
            <a href="#" class="header-dropdown-item">Help & Support</a>
            <a href="#" class="header-dropdown-item">Sign Out</a>
          </div>
        </div>
      </div>
    </header>

    <div class="subheader">
      <div class="subheader-left">
        <button data-action="click->sidebar#toggle" data-sidebar-target="toggle" title="Toggle sidebar" class="btn btn-outline-primary btn-circular<%= " on" unless cookies[:sidebar_closed] == "1" %>">
          <%= icon_tag "menu", size: 16 %>
        </button>
        <div class="subheader-breadcrumbs">
          <a href="#" class="typography-link">Home</a>
          &raquo;
          <a href="#" class="typography-link">Breadcrumb 2</a>
          &raquo;
          Current Page
        </div>
      </div>
      <div class="subheader-right">
        <span class="subheader-btn"><%= icon_tag "info", size: 16 %></span>
        <span class="subheader-btn"><%= icon_tag "settings", size: 16 %></span>
        <span class="subheader-btn">?</span>
      </div>
    </div>

    <div class="main">
      <aside data-sidebar-target="container" class="sidebar<%= " open" unless cookies[:sidebar_closed] == "1" %>">
        <div class="sidebar-content">
          <div class="sidebar-header">
            <h2 class="sidebar-title">Sidebar Title</h2>
            <button data-action="click->sidebar#close" class="btn btn-outline-primary btn-circular" title="Close sidebar">
              <%= icon_tag "chevron-left", size: 16 %>
            </button>
          </div>
          <nav class="sidebar-nav">
            <a href="#">Nav 1</a>
            <a href="#">Nav 2</a>
          </nav>
        </div>
      </aside>

      <main class="content">
        <%= yield %>
      </main>
    </div>

    <footer class="footer">
      <div class="footer-left">
        <a href="#">Feedback</a>
      </div>
      <div class="footer-right">
        <span>Â© <%= Date.today.year %>, ACME, Inc.</span>
        <a href="#">Privacy</a>
        <a href="#">Terms</a>
        <a href="#">Cookie preferences</a>
      </div>
    </footer>
  </body>
</html>
