<div data-controller="search-page" data-search-page-dynamic-path-value="<%= url_for(format: :json) %>" class="max-w-4xl mx-auto py-8 px-4">
  <h1 class="text-2xl font-bold mb-6">Search</h1>

  <%= form_with url: url_for, method: :get, local: true, class: "mb-8" do |f| %>
    <div class="flex gap-2">
      <%= f.text_field :q,
        value: @query,
        placeholder: "Search...",
        class: "flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",
        autofocus: true,
        data: { search_page_target: "input" } %>
      <%= f.submit "Search", class: "px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 cursor-pointer" %>
    </div>
  <% end %>

  <div data-search-page-target="queryContainer" class="text-sm text-gray-500 mb-4">
    Results for "<span data-search-page-target="query"><%= @query %></span>"
  </div>

  <div data-search-page-target="results" class="search-results-page"></div>

  <div data-search-page-target="emptyResults" class="search-no-results hidden">
    <span>No results found</span>
  </div>

  <div data-search-page-target="loading" class="search-loading hidden text-gray-500">
    <%= render ui.build(RapidUI::Icon, "loader", spin: true) %>
    <span>Searching...</span>
  </div>

  <%# Template for rendering search results %>
  <template data-search-page-target="resultTemplate">
    <a class="search-result-item" data-result-url="" data-result-title="" data-result-description="">
      <div class="search-result-title"></div>
      <div class="search-result-description"></div>
    </a>
  </template>
</div>
