<%= component_tag class: "header-search", data: { controller: "search", search_path_value: path } do %>
  <span class="block md:hidden">
    <a href="#" class="btn" data-action="click->search#toggleDropdown"><%= search_icon %></a>
  </span>

  <div class="header-search-bar hidden md:flex">
    <%= search_icon %>

    <input
      type="text"
      placeholder="<%= placeholder %>"
      data-search-target="desktopInput"
      data-action="input->search#onInput"
    />

    <span data-search-target="shortcutHint" class="search-shortcut-hint"><%= shortcut_hint %></span>
    <button data-search-target="desktopClearButton" data-action="click->search#closeDropdown" class="search-close-btn hidden" title="<%= clear_title %>">
      <%= clear_icon %>
    </button>
  </div>

  <div data-search-target="dropdown" class="search-dropdown hidden">
    <div class="flex items-center justify-between gap-3 md:hidden p-4">
      <div class="header-search-bar flex flex-1">
        <input
          type="text"
          placeholder="<%= placeholder %>"
          data-search-target="mobileInput"
          data-action="input->search#onInput"
          class="search-modal-input"
        />

        <button data-search-target="mobileClearButton" data-action="click->search#clearSearch" class="search-close-btn" title="<%= clear_title %>">
          <%= clear_icon %>
        </button>
      </div>

      <%= cancel_button %>
    </div>

    <div data-search-target="loading" class="search-loading hidden">
      <%= loading_icon %>
      <%= loading_text %>
    </div>

    <div data-search-target="error" class="search-error hidden">
      <%= error_text %>
    </div>

    <div data-search-target="results"></div>
  </div>
<% end %>
